digraph "make" {
graph [ranksep=0.25, fontname=Arial,  nodesep=0.25, ranksep=0.5];
node [fontname=Arial, style=filled, height=0, width=0, shape=box];
edge [style="setlinewidth(2)"];

config -> "cleaned_ott/root_ott_id.txt"
config -> "cleaned_ott/cleaning_flags.txt"
"$OTT_DIR/version.txt" -> "cleaned_ott/version.txt"

"phylo_input/study_tree_pairs.txt" -> "exemplified_phylo/args.txt"

"phylo_input/study_tree_pairs.txt" -> "otc-nonterminalstoexemplars"
"exemplified_phylo/args.txt" -> "otc-nonterminalstoexemplars"
"cleaned_phylo/phylo_inputs_cleaned.txt" -> "otc-nonterminalstoexemplars"
"otc-nonterminalstoexemplars" -> "exemplified_phylo/nonempty_trees.txt"
"otc-nonterminalstoexemplars"  [style=filled, color="#EEBBDD"]

"$OTT_FILEPATHS" -> "suppress_by_flag.py"
"cleaned_ott/version.txt" ->  "suppress_by_flag.py"
"cleaned_ott/cleaning_flags.txt" ->  "suppress_by_flag.py"
"cleaned_ott/root_ott_id.txt" ->  "suppress_by_flag.py"
"suppress_by_flag.py" [style=filled, color="#EEBBDD"]
"suppress_by_flag.py" -> "cleaned_ott/cleaned_ott.tre"

"phylo_input/rank_collection.json" -> "collection_export.py --export=studyID"
"collection_export.py --export=studyID" -> "phylo_input/studies.txt"
"collection_export.py --export=studyID" [style=filled, color="#EEBBDD"]

"phylo_input/rank_collection.json" -> "collection_export.py --export=studyID_treeID"
"collection_export.py --export=studyID_treeID" -> "phylo_input/studies_tree_pairs.txt"
"collection_export.py --export=studyID_treeID" [style=filled, color="#EEBBDD"]

"phylo_snapshot/git_shas.txt"

"phylo_snapshot/git_shas.txt" ->  "export_studies_from_collection.py"
"phylo_input/rank_collection.json" -> "export_studies_from_collection.py"
"export_studies_from_collection.py" -> "phylo_snapshot/concrete_rank_collection.json"
"export_studies_from_collection.py"  [style=filled, color="#EEBBDD"]

"phylo_input/study_tree_pairs.txt" -> "bin/write_needs_updating"
"bin/write_needs_updating" -> "cleaned_phylo/needs_updating.txt"
"bin/write_needs_updating"   [style=filled, color="#EEBBDD"]

"cleaned_phylo/needs_updating.txt" -> "prune_to_clean_mapped.py"
"cleaned_ott/cleaning_flags.txt" -> "prune_to_clean_mapped.py"
"cleaned_phylo/root_ott_it.txt" -> "prune_to_clean_mapped.py"
"phylo_snapshot/concrete_rank_collection.json" -> "prune_to_clean_mapped.py"
"prune_to_clean_mapped.py"  [style=filled, color="#EEBBDD"]
"prune_to_clean_mapped.py" -> "cleaned_phylo/phylo_inputs_cleaned.txt"


config -> "phylo_input/collections.txt"
"phylo_input/collections.txt" -> "phylo_input/rank_collection.json"
# here is where we need to depend on whether the collections have changed!
}